<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1" />
    <title>Chef Amélie Dupont - Quiz Gourmand</title>
    <meta name="description" content="Découvrez votre profil gourmand et accédez à la collection privée de 500 recettes sans sucre, sans gluten et sans lactose de la Chef Amélie Dupont." />
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&family=Open+Sans:wght@400;500;600&display=swap" rel="stylesheet">
    <!-- Open Graph Tags -->
    <meta property="og:title" content="Chef Amélie Dupont - Recettes sans sucre, sans gluten, sans lactose" />
    <meta property="og:description" content="500 recettes gourmandes sans sucre, sans gluten et sans lactose qui nourrissent, font mincir avec plaisir et rééquilibrent votre corps." />
    <meta property="og:type" content="website" />
    
    <!-- Facebook Pixel Code -->
    <script>
      !function(f,b,e,v,n,t,s)
      {if(f.fbq)return;n=f.fbq=function(){n.callMethod?
      n.callMethod.apply(n,arguments):n.queue.push(arguments)};
      if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
      n.queue=[];t=b.createElement(e);t.async=!0;
      t.src=v;t.onerror=function(){console.warn('Facebook Pixel failed to load');};
      s=b.getElementsByTagName(e)[0];
      s.parentNode.insertBefore(t,s)}(window, document,'script',
      'https://connect.facebook.net/en_US/fbevents.js');
      fbq('init', '644431871463181');
      // fbq('track', 'PageView'); // <--- COMENTADO para evitar PageView automático
    </script>
    <!-- End Facebook Pixel Code -->
    
    <!-- UTM Parameters Capture Script -->
    <script>
      (function() {
        // Função para capturar parâmetros UTM da URL
        function captureUtmParams() {
          const urlParams = new URLSearchParams(window.location.search);
          const utmParams = {
            utm_source: urlParams.get('utm_source') || 'organic',
            utm_campaign: urlParams.get('utm_campaign') || '',
            utm_medium: urlParams.get('utm_medium') || '',
            utm_content: urlParams.get('utm_content') || '',
            utm_term: urlParams.get('utm_term') || ''
          };
          
          // Definir no window.utm_params para compatibilidade com o código existente
          window.utm_params = utmParams;
          
          // Também salvar no localStorage para persistência
          localStorage.setItem('utm_params', JSON.stringify(utmParams));
          
          console.log('UTM Parameters captured:', utmParams);
          return utmParams;
        }
        
        // Capturar parâmetros UTM imediatamente
        captureUtmParams();
        
        // Função para recuperar parâmetros UTM do localStorage se não estiverem na URL
        function loadUtmParamsFromStorage() {
          if (!window.utm_params || !window.utm_params.utm_source || window.utm_params.utm_source === 'organic') {
            const storedParams = localStorage.getItem('utm_params');
            if (storedParams) {
              try {
                window.utm_params = JSON.parse(storedParams);
                console.log('UTM Parameters loaded from storage:', window.utm_params);
              } catch (e) {
                console.error('Error parsing stored UTM parameters:', e);
              }
            }
          }
        }
        
        // Carregar parâmetros do localStorage quando o DOM estiver pronto
        if (document.readyState === 'loading') {
          document.addEventListener('DOMContentLoaded', loadUtmParamsFromStorage);
        } else {
          loadUtmParamsFromStorage();
        }
      })();
    </script>
    <!-- End UTM Parameters Capture Script -->
    
    <!-- Utmify Script -->
    <script src="https://cdn.utmify.com.br/scripts/utms/latest.js" data-utmify-prevent-subids async defer></script>
    <!-- End Utmify Script -->

  </head>
  <body>
    <!-- Facebook Pixel noscript -->
    <noscript><img height="1" width="1" style="display:none"
      src="https://www.facebook.com/tr?id=644431871463181&ev=PageView&noscript=1"
    /></noscript>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
    <!-- This is a replit script which adds a banner on the top of the page when opened in development mode outside the replit environment -->
    <script type="text/javascript" src="https://replit.com/public/js/replit-dev-banner.js"></script>
  </body>
</html>
